var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");
$.fn.setForm=function(a){var b=this;$.each(a,function(a,d){findobj=b.find("[id="+a+"]");findobj[0]&&"imageSrc"!=findobj[0].id&&findobj.val(d)})};
$(document).ready(function(){var a=window.localStorage,b=getCarId(),c=a.getItem("car"+b);if(null!=c&&""!=c){c=JSON.parse(c);$("#td-detial-form").setForm(c);var d;$.each(c.reservation,function(a,b){switch(b.usage){case "0":b.usage="\u51fa\u5dee";break;case "1":b.usage="\u63a5\u5f85";break;case "2":b.usage="\u5916\u52e4";break;case "3":b.usage="\u8f66\u8f86\u7ef4\u4fee";break;case "4":b.usage="\u5176\u4ed6"}b.borrowt1||(b.borrowt1="");b.borrowt2||(b.borrowt2="");d="";d+='<div class="cd-timeline-block"><div class="cd-timeline-img cd-picture"><img src="'+
b.applicant.avatar+'" alt="Picture"></div><div class="cd-timeline-content"><h2>'+b.applicant.name+"</h2><p>\u8d77\u70b9\uff1a"+b.startpoint+" \u76ee\u7684\u5730\uff1a"+b.endpoint+" \u7528\u9014\uff1a"+b.usage+"</p><p>\u7ea6"+b["schedule-start"]+"-"+b["schedule-end"]+'</p><span class="cd-date">\u501f'+b.borrowt1+"-"+b.borrowt2+"</span><p>\u5907\u6ce8\uff1a"+b.remark+"</p></div></div>";$(".cd-container").append(d)});if(4<$("section>div").length){var e=0,f=0;$(document.body).on("touchend",function(a){e=
$(document.body).height();f=$(window).height();a=$(document.body).scrollTop();var c=a-(e-f),d={offset:$("section>div").length,car:{carid:b},rowCount:"5"};64<=c&&0<a&&(showMask(),$.ajax({url:"../server/reservation/history-load.php",type:"POST",data:d,dataType:"json",cache:!1,success:function(a){if(a.error)$.tdAlert("\u52a0\u8f7d\u5931\u8d25\uff01"+a.errorMsg);else{var b;$.each(a.records,function(a,c){switch(c.usage){case "0":c.usage="\u51fa\u5dee";break;case "1":c.usage="\u63a5\u5f85";break;case "2":c.usage=
"\u5916\u52e4";break;case "3":c.usage="\u8f66\u8f86\u7ef4\u4fee";break;case "4":c.usage="\u5176\u4ed6"}c.borrowt1||(c.borrowt1="");c.borrowt2||(c.borrowt2="");b="";b+='<div class="cd-timeline-block"><div class="cd-timeline-img cd-picture"><img src="'+c.applicant.avatar+'" alt="Picture"></div><div class="cd-timeline-content"><h2>'+c.applicant.name+"</h2><p>\u8d77\u70b9\uff1a"+c.startpoint+" \u76ee\u7684\u5730\uff1a"+c.endpoint+" \u7528\u9014\uff1a"+c.usage+"</p><p>\u7ea6"+c["schedule-start"]+"-"+c["schedule-end"]+
'</p><span class="cd-date">\u501f'+c.borrowt1+"-"+c.borrowt2+"</span><p>\u5907\u6ce8\uff1a"+c.remark+"</p></div></div>";$(".cd-container").append(b)});5>a.records.length&&$("#pullTOLoad").text("\u52a0\u8f7d\u5b8c\u6210\uff0c\u6ca1\u6709\u66f4\u591a\u6570\u636e")}$("#td-mask").hide()},error:function(){$.tdAlert("\u5f88\u9057\u61be\uff01\u52a0\u8f7d\u5931\u8d25\uff01")},xhr:function(){var a=new window.XMLHttpRequest;a.upload.addEventListener("progress",function(a){console.log(a.lengthComputable);a.lengthComputable&&
100*a.loaded/a.total},!1);return a}}))})}else $("#pullTOLoad").text("\u52a0\u8f7d\u5b8c\u6210\uff0c\u6ca1\u6709\u66f4\u591a\u6570\u636e")}else $.tdAlert("\u8bfb\u53d6\u6570\u636e\u5931\u8d25\uff01\u8bf7\u8fd4\u56de\u91cd\u65b0\u5c1d\u8bd5");a.clear()});
$("#td-edit-submit").click(function(a){var b=$("form");a=new FormData(b[0]);for(var b=b.find("*[required]"),b=$jscomp.makeIterator(b),c=b.next();!c.done;c=b.next())if(field=c.value,!field.value)return $.tdAlert($(field).prev("label").css("color","red").animate({opacity:0},500,function(){$(this).css({opacity:"1",color:"black"})}).html()+"\u5fc5\u586b\u54e6~"),!1;$.ajax({url:"../server/car-management/car-update.php",type:"POST",data:a,processData:!1,contentType:!1,cache:!1,success:function(a){a=JSON.parse(a);
a.error?$.tdAlert("\u4fee\u6539\u5931\u8d25\uff01"+a.errorMsg):$.tdAlert("\u606d\u559c\uff01\u4fee\u6539\u6210\u529f\uff01")},error:function(){$.tdAlert("\u5f88\u9057\u61be\uff01\u4fee\u6539\u5931\u8d25\uff01")},xhr:function(){var a=new window.XMLHttpRequest;a.upload.addEventListener("progress",function(a){console.log(a.lengthComputable);a.lengthComputable&&100*a.loaded/a.total},!1);return a}})});function getCarId(){return decodeURI(document.URL).split("=")[1]}
function showMask(){$("#td-mask").css("height",$(document).height());$("#td-mask").css("width",$(document).width());$("#td-mask").show();$("#td-mask img").show()};
