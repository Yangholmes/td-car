<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
</head>

<body>
  <p>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br>我只是还没开始认真<br></p>

  <div class="message-box-frame">
    <div class="message-box-msg">这是消息</div>
    <div class="message-box-button">Confirm</div>
  </div>
</body>

<script src="../lib/jquery/jquery-3.2.0.js"></script>

<script>

  tdAlert('这是一条信息');

  function tdAlert(message){
    message = filter(message);

    if( $('.translucent-mask').length ){
  		$('.translucent-mask').fadeIn();
  		$('.message-box-frame').fadeIn().children('.message-box-msg').html(message);
  		return true;
  	}
    var mask = '<div class="translucent-mask"></div>',
        maskStyle = {
          width: '100%',
          height: '100%',
          position: 'fixed',
          top: 0,
          left: 0,
          background: 'rgba(128, 128, 128, .5)',
          'z-index': 100,
        };
    $(mask)
    .on('touchstart', function(e){
      $(e.currentTarget).remove();
      $('.message-box-frame').remove();
    })
    .appendTo($('body')).css(maskStyle);

    var messageBox = '<div class="message-box-frame"></div>',
        messageBoxStyle = {
          width: 'calc( 100% - 60px )',
          height: 'auto',
          position: 'fixed',
          background: 'white',
          'z-index': 101,
          left: 'calc( 0px + 30px )',
          top: '30%',
          'border-radius': '5px',
          'box-shadow': 'rgb(125, 125, 125) 1px 1px 10px 0px',
          'font-family': '"Microsoft Yahei", "Lucida Grande", "Lucida Sans Unicode", Helvetica, Arial, Verdana, sans-serif',
        },
        $messageBox = $(messageBox);
    $messageBox.css(messageBoxStyle);

    var messageBoxMsg = '<div class="message-box-msg"></div>',
        messageBoxMsgStyle = {
          padding: '1em 1.5em',
          'color': 'rgba(50, 50, 50, 1)',
          'border-bottom': '1px solid rgba(150, 150, 150, .2)',
          'max-height': '10em',
          'overflow-y': 'scroll',
        },
        $messageBoxMsg = $(messageBoxMsg);
    $messageBoxMsg.html(message).css(messageBoxMsgStyle);

    var messageBoxConfirmBtn = '<div class="message-box-button">知道了</div>',
        messageBoxConfirmBtnStyle = {
          'text-align': 'center',
          padding: '0.2em .2em',
          height: '2em',
          'line-height': '2em',
          '-webkit-user-select': 'none',
          'color': 'rgba(13, 128, 226, 1)'
        },
        $messageBoxConfirmBtn = $(messageBoxConfirmBtn);
    $messageBoxConfirmBtn
    .css(messageBoxConfirmBtnStyle)
    .on('touchstart', function(e){
      $(e.currentTarget).css({
          background: 'rgba(200, 200, 200, 0.3)',
      });
    })
    .on('touchend', function(e){
      $(e.currentTarget).css({
        background: '',
      })
      .parent('.message-box-frame').remove();
      $('.translucent-mask').remove();
    });

    $messageBox.append($messageBoxMsg).append($messageBoxConfirmBtn).appendTo($('body'));

    /**
     * message filter
     */
    function filter(message){
      var msg = message.toString().replace(/(\n)/, '<br>');
      return msg;
    }
  }

</script>

</html>
